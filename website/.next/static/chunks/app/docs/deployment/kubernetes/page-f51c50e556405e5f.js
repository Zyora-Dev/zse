(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{4467:function(e,n,t){Promise.resolve().then(t.bind(t,6105))},6105:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var s=t(3827),i=t(9676),a=t(5558),l=t(4657),r=t(4987);let o=[{id:"overview",title:"Overview",level:2},{id:"prerequisites",title:"Prerequisites",level:2},{id:"deployment",title:"Deployment",level:2},{id:"service",title:"Service & Ingress",level:2},{id:"gpu-scheduling",title:"GPU Scheduling",level:2},{id:"autoscaling",title:"Autoscaling",level:2}];function c(){return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("article",{className:"flex-1 min-w-0 py-8 px-6 lg:px-10",children:[(0,s.jsx)(i.lv,{title:"Kubernetes Deployment",description:"Deploy ZSE on Kubernetes with GPU support, autoscaling, and high availability.",badge:"Deployment"}),(0,s.jsxs)(i.Je,{id:"overview",title:"Overview",children:[(0,s.jsx)("p",{className:"mb-4",children:"Kubernetes is the recommended platform for production ZSE deployments at scale. This guide covers GPU scheduling, autoscaling, and high-availability configurations."}),(0,s.jsxs)(r.gy,{columns:3,children:[(0,s.jsx)(r.Zb,{title:"GPU Nodes",description:"NVIDIA device plugin integration"}),(0,s.jsx)(r.Zb,{title:"Autoscaling",description:"HPA based on GPU metrics"}),(0,s.jsx)(r.Zb,{title:"High Availability",description:"Multi-replica deployments"})]})]}),(0,s.jsxs)(i.Je,{id:"prerequisites",title:"Prerequisites",children:[(0,s.jsx)(r.VS,{features:["Kubernetes cluster 1.25+","NVIDIA GPU Operator or device plugin installed","kubectl configured for your cluster","Helm 3.x (optional, for chart installation)"]}),(0,s.jsx)(i.KU,{id:"nvidia-plugin",title:"NVIDIA Device Plugin",children:(0,s.jsx)(a.d,{language:"bash",code:'# Install NVIDIA device plugin (if not using GPU Operator)\nkubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.14.0/nvidia-device-plugin.yml\n\n# Verify GPUs are detected\nkubectl get nodes -o=jsonpath=\'{range .items[*]}{.metadata.name}{"\\t"}{.status.capacity.nvidia\\.com/gpu}{"\\n"}{end}\''})})]}),(0,s.jsxs)(i.Je,{id:"deployment",title:"Deployment",children:[(0,s.jsx)(i.KU,{id:"basic-deployment",title:"Basic Deployment",children:(0,s.jsx)(a.d,{language:"yaml",filename:"zse-deployment.yaml",code:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: zse\n  labels:\n    app: zse\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: zse\n  template:\n    metadata:\n      labels:\n        app: zse\n    spec:\n      containers:\n      - name: zse\n        image: zyora/zse:latest\n        ports:\n        - containerPort: 8000\n        command: ["zse", "serve", "/models/qwen7b.zse"]\n        resources:\n          limits:\n            nvidia.com/gpu: 1\n          requests:\n            memory: "16Gi"\n            cpu: "4"\n        volumeMounts:\n        - name: models\n          mountPath: /models\n        env:\n        - name: ZSE_HOST\n          value: "0.0.0.0"\n        - name: ZSE_PORT\n          value: "8000"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8000\n          initialDelaySeconds: 60\n          periodSeconds: 5\n      volumes:\n      - name: models\n        persistentVolumeClaim:\n          claimName: zse-models-pvc'})}),(0,s.jsx)(i.KU,{id:"pvc",title:"Persistent Volume Claim",children:(0,s.jsx)(a.d,{language:"yaml",filename:"zse-pvc.yaml",code:"apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: zse-models-pvc\nspec:\n  accessModes:\n    - ReadOnlyMany  # Models are read-only\n  storageClassName: fast-ssd\n  resources:\n    requests:\n      storage: 50Gi"})}),(0,s.jsx)(i.KU,{id:"configmap",title:"ConfigMap",children:(0,s.jsx)(a.d,{language:"yaml",filename:"zse-configmap.yaml",code:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: zse-config\ndata:\n  config.yaml: |\n    server:\n      host: 0.0.0.0\n      port: 8000\n      workers: 4\n    model:\n      max_context: 8192\n      batch_size: 32\n    logging:\n      level: info\n      format: json"})}),(0,s.jsx)(i.KU,{id:"apply",title:"Apply Resources",children:(0,s.jsx)(a.d,{language:"bash",code:"kubectl apply -f zse-pvc.yaml\nkubectl apply -f zse-configmap.yaml\nkubectl apply -f zse-deployment.yaml\n\n# Check status\nkubectl get pods -l app=zse\nkubectl logs -f deployment/zse"})})]}),(0,s.jsxs)(i.Je,{id:"service",title:"Service & Ingress",children:[(0,s.jsx)(i.KU,{id:"service",title:"Service",children:(0,s.jsx)(a.d,{language:"yaml",filename:"zse-service.yaml",code:"apiVersion: v1\nkind: Service\nmetadata:\n  name: zse\nspec:\n  selector:\n    app: zse\n  ports:\n  - port: 80\n    targetPort: 8000\n  type: ClusterIP"})}),(0,s.jsx)(i.KU,{id:"ingress",title:"Ingress with TLS",children:(0,s.jsx)(a.d,{language:"yaml",filename:"zse-ingress.yaml",code:"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: zse\n  annotations:\n    kubernetes.io/ingress.class: nginx\n    cert-manager.io/cluster-issuer: letsencrypt-prod\nspec:\n  tls:\n  - hosts:\n    - api.example.com\n    secretName: zse-tls\n  rules:\n  - host: api.example.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: zse\n            port:\n              number: 80"})})]}),(0,s.jsxs)(i.Je,{id:"gpu-scheduling",title:"GPU Scheduling",children:[(0,s.jsx)(i.KU,{id:"node-selector",title:"Node Selector",children:(0,s.jsx)(a.d,{language:"yaml",code:"spec:\n  template:\n    spec:\n      nodeSelector:\n        gpu-type: a100  # Select specific GPU nodes\n      tolerations:\n      - key: nvidia.com/gpu\n        operator: Exists\n        effect: NoSchedule"})}),(0,s.jsxs)(i.KU,{id:"affinity",title:"Pod Affinity",children:[(0,s.jsx)(a.d,{language:"yaml",code:"spec:\n  template:\n    spec:\n      affinity:\n        podAntiAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n          - weight: 100\n            podAffinityTerm:\n              labelSelector:\n                matchLabels:\n                  app: zse\n              topologyKey: kubernetes.io/hostname"}),(0,s.jsx)(l.U,{type:"info",children:"Pod anti-affinity spreads replicas across nodes for better fault tolerance and GPU utilization."})]}),(0,s.jsx)(i.KU,{id:"multi-gpu",title:"Multi-GPU Pods",children:(0,s.jsx)(a.d,{language:"yaml",code:'resources:\n  limits:\n    nvidia.com/gpu: 2  # Request 2 GPUs per pod\n  requests:\n    memory: "64Gi"\n    cpu: "16"'})})]}),(0,s.jsxs)(i.Je,{id:"autoscaling",title:"Autoscaling",children:[(0,s.jsx)(i.KU,{id:"hpa",title:"Horizontal Pod Autoscaler",children:(0,s.jsx)(a.d,{language:"yaml",filename:"zse-hpa.yaml",code:'apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: zse\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: zse\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n  - type: Pods\n    pods:\n      metric:\n        name: requests_per_second\n      target:\n        type: AverageValue\n        averageValue: "100"'})}),(0,s.jsxs)(i.KU,{id:"gpu-metrics",title:"GPU-Based Scaling",children:[(0,s.jsx)("p",{className:"mb-4",children:"For GPU-based autoscaling, use the DCGM exporter with Prometheus adapter:"}),(0,s.jsx)(a.d,{language:"yaml",code:'metrics:\n- type: External\n  external:\n    metric:\n      name: DCGM_FI_DEV_GPU_UTIL\n      selector:\n        matchLabels:\n          pod: zse\n    target:\n      type: AverageValue\n      averageValue: "80"  # Scale when GPU > 80%'})]}),(0,s.jsx)(l.U,{type:"warning",children:"GPU autoscaling requires available GPU capacity in your cluster. Configure cluster autoscaler to add GPU nodes when needed."})]}),(0,s.jsx)(i.KO,{prev:{href:"/docs/deployment/docker",title:"Docker"},next:{href:"/docs/deployment/serverless",title:"Serverless"}})]}),(0,s.jsx)(i.o5,{items:o})]})}},4987:function(e,n,t){"use strict";t.d(n,{Rg:function(){return r},VS:function(){return o},Zb:function(){return c},gy:function(){return d}});var s=t(3827),i=t(5293),a=t(9259),l=t(2169);function r(e){let{steps:n}=e;return(0,s.jsx)("div",{className:"my-6 space-y-0",children:n.map((e,t)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"relative pl-8 pb-8 last:pb-0",children:[t<n.length-1&&(0,s.jsx)("div",{className:"absolute left-[11px] top-6 bottom-0 w-px bg-white/10"}),(0,s.jsx)("div",{className:"absolute left-0 top-0 w-6 h-6 rounded-full bg-lime/20 border border-lime/40 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs font-bold text-lime",children:t+1})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-base font-semibold text-white mb-1",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-sm text-white/50 mb-3",children:e.description}),e.code&&(0,s.jsx)("pre",{className:"bg-white/[0.03] border border-white/[0.06] rounded-lg p-3 overflow-x-auto my-2",children:(0,s.jsx)("code",{className:"text-sm text-lime/90 font-mono",children:e.code})}),e.content&&(0,s.jsx)("div",{className:"text-sm text-white/70",children:e.content})]})]},t))})}function o(e){let{features:n}=e;return(0,s.jsx)("ul",{className:"my-4 space-y-2",children:n.map((e,n)=>(0,s.jsxs)(i.E.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*n},className:"flex items-start gap-2",children:[(0,s.jsx)(a.Z,{className:"w-4 h-4 text-lime mt-0.5 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm text-white/70",children:e})]},n))})}function c(e){let{title:n,description:t,icon:a,href:r,children:o}=e,c=r?"a":"div";return(0,s.jsx)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:r?{y:-2}:void 0,children:(0,s.jsxs)(c,{...r?{href:r,className:"block"}:{},className:(0,l.cn)("p-4 rounded-lg border border-white/[0.06] bg-white/[0.02]",r&&"hover:border-lime/30 hover:bg-white/[0.04] transition-all cursor-pointer"),children:[a&&(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-lime/10 flex items-center justify-center mb-3",children:(0,s.jsx)(a,{className:"w-4 h-4 text-lime"})}),(0,s.jsx)("h4",{className:"text-base font-semibold text-white mb-1",children:n}),t&&(0,s.jsx)("p",{className:"text-sm text-white/50",children:t}),o]})})}function d(e){let{children:n,columns:t=2}=e;return(0,s.jsx)("div",{className:(0,l.cn)("grid gap-4 my-6",2===t&&"md:grid-cols-2",3===t&&"md:grid-cols-3"),children:n})}}},function(e){e.O(0,[5293,2150,2716,2971,8069,1744],function(){return e(e.s=4467)}),_N_E=e.O()}]);